<Project>

  <Target Name="Generate Sass" BeforeTargets="CopyFilesToOutputDirectory">
    <Exec ConsoleToMSBuild="true"
          ContinueOnError="true"
          EchoOff="true"
          StandardErrorImportance="low"
          StandardOutputImportance="low"
          IgnoreExitCode="true"
          Command="dotnet $(SassCompilerDotNetJsonDll) get $(SassCompilerAppsettingsJson) SassCompiler:SourceFolder">
      <Output TaskParameter="ExitCode" PropertyName="SassCompilerSourceFolderExitCode" />
      <Output TaskParameter="ConsoleOutput" PropertyName="SassCompilerSourceFolder" Condition="'$(SassCompilerSourceFolderExitCode)' == '0'" />
    </Exec>
    <Exec ConsoleToMSBuild="true"
          ContinueOnError="true"
          EchoOff="true"
          StandardErrorImportance="low"
          StandardOutputImportance="low"
          IgnoreExitCode="true"
          Command="dotnet $(SassCompilerDotNetJsonDll) get $(SassCompilerAppsettingsJson) SassCompiler:TargetFolder">
      <Output TaskParameter="ExitCode" PropertyName="SassCompilerTargetFolderExitCode" />
      <Output TaskParameter="ConsoleOutput" PropertyName="SassCompilerTargetFolder" Condition="'$(SassCompilerTargetFolderExitCode)' == '0'" />
    </Exec>
    <Exec ConsoleToMSBuild="true"
      ContinueOnError="true"
      EchoOff="true"
      StandardErrorImportance="low"
      StandardOutputImportance="low"
      IgnoreExitCode="true"
      Command="dotnet $(SassCompilerDotNetJsonDll) get $(SassCompilerAppsettingsJson) SassCompiler:Arguments">
      <Output TaskParameter="ExitCode" PropertyName="SassCompilerArgumentsExitCode" />
      <Output TaskParameter="ConsoleOutput" PropertyName="SassCompilerArguments" Condition="'$(SassCompilerArgumentsExitCode)' == '0'" />
    </Exec>
    <Exec Command="$(SassCompilerBuildCommand) $(SassCompilerArguments) $(ProjectDir)$(SassCompilerSourceFolder):$(ProjectDir)$(SassCompilerTargetFolder)" />
  </Target>

</Project>
