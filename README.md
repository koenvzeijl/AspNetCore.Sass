# AspNetCore.SassCompiler
[![NuGet Version](https://img.shields.io/nuget/v/AspNetCore.SassCompiler.svg?style=flat)](https://www.nuget.org/packages/AspNetCore.SassCompiler/)

Sass Compiler Library for .NET Core 3.1/5.x./6.x without node.

## Installation
The installation of this package is quite simple, you can install this package using NuGet with the following command:

```shell
# Package Manager
PM> Install-Package AspNetCore.SassCompiler

# .NET CLI
dotnet add package AspNetCore.SassCompiler
```

## Configuration
After adding the package, the Sass styles from the SourceFolder (defaults to: Styles) will automatically be compiled into `.css` files in the TargetFolder (defaults to: wwwroot\css) on build. 
You can also adjust the default (`--error-css --style=compressed --no-source-map`) dart-sass Arguments in the sasscompiler.json. Scoped CSS is also supported for applications that use blazor for example. This feature is enabled by default and will use the default scoped CSS folders as shown below. To disable this feature, change GenerateScopedCss to false.
To adjust any of the default configuration, please add one or more of the following settings to the autogenerated **sasscompiler.json** config file:
```json
{
  "TaskBuildEnvironment": "",
  "SourceFolder": "Styles",
  "TargetFolder": "wwwroot/css",
  "Arguments": "--error-css --style=compressed --no-source-map",
  "GenerateScopedCss": true,
  "ScopedCssFolders": [
    "Views",
    "Pages",
    "Shared",
    "Components"
  ]
}
```
On top of the main **sasscompiler.json** config file, a second config file can be used, i.e. for Development, **sasscompiler.Development.json**:
```json
{
  "Arguments": "--error-css --style=expanded --no-source-map"
}
```
In this case, we need to specify the second file under `TaskBuildEnvironment` inside **sasscompiler.json**:
```json
  "TaskBuildEnvironment": "Development",
```
**Note:** `TaskBuildEnvironment` is only used for MSBuild **Tasks** in order to find the second configuration file, when the machine/system `ASPNETCORE_ENVIRONMENT` is not set (usually in development). The machine/system `ASPNETCORE_ENVIRONMENT` has priority over `TaskBuildEnvironment` and the `ASPNETCORE_ENVIRONMENT` from **launchSettings.json** is ignored.

## Sass watcher
To use the Sass watcher in your project, you must add the following code to your startup.cs:
```csharp
public void ConfigureServices(IServiceCollection services) 
{
  
#if DEBUG
  services.AddSassCompiler();
#endif

}
```

We recommend adding the `#if DEBUG` statement to only use a watcher during debug mode.

**Note:** The Sass watcher is currently not supported inside of a docker container. This should
only be an issue when you're developing inside of a docker container, running the published
application in docker is supported as the compiler is automatically run during the MSBuild publish
step. See [this](https://github.com/koenvzeijl/AspNetCore.SassCompiler/issues/44) issue for the progress.

## Publish

This library also includes an MSBuild task that runs during the publish of your application. Because of this you don't need to include
the Sass Watcher in your release builds and you can safely add the generated .css files to the .gitignore file as they are regenerated during publish. 

## Examples
To provide you with examples, a configured version of a .NET 5.0 project and a configured .NET 6.0 Blazor app are added in the /Samples folder. Please see the link below for quick access

[.NET Core 3.1](https://github.com/koenvzeijl/AspNetCore.SassCompiler/tree/master/Samples/AspNetCore.SassCompiler.Sample31)

[.NET 5.0](https://github.com/koenvzeijl/AspNetCore.SassCompiler/tree/master/Samples/AspNetCore.SassCompiler.Sample)

[.NET 6.0 / Blazor](https://github.com/koenvzeijl/AspNetCore.SassCompiler/tree/master/Samples/AspNetCore.SassCompiler.BlazorSample)
